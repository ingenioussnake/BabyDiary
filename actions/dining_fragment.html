<div class="weui_cells weui_cells_form action_form">
    <div class="weui_cell">
        <div class="weui_cell_hd"><label class="weui_label" for="">日期</label></div>
        <div class="weui_cell_bd weui_cell_primary">
            <input id="date" class="weui_input" type="date" value="">
        </div>
    </div>
    <div class="weui_cell">
        <div class="weui_cell_hd"><label class="weui_label" for="">开始</label></div>
        <div class="weui_cell_bd weui_cell_primary">
            <input id="start" class="weui_input" type="time" placeholder="" value="">
        </div>
    </div>
    <div class="weui_cell">
        <div class="weui_cell_hd"><label class="weui_label" for="">结束</label></div>
        <div class="weui_cell_bd weui_cell_primary">
            <input id="end" class="weui_input" type="time" placeholder="" value="">
        </div>
    </div>
    <div class="weui_cells weui_cells_radio">
        <label class="weui_cell weui_check_label" for="mm">
            <div class="weui_cell_bd weui_cell_primary">
                <p>母乳</p>
            </div>
            <div class="weui_cell_ft">
                <input name="food" class="weui_check" id="mm" type="radio" value="mm" checked="checked">
                <span class="weui_icon_checked"></span>
            </div>
        </label>
        <label class="weui_cell weui_check_label" for="fm">

            <div class="weui_cell_bd weui_cell_primary">
                <p>配方</p>
            </div>
            <div class="weui_cell_ft">
                <input name="food" class="weui_check" id="fm" type="radio" value="fm">
                <span class="weui_icon_checked"></span>
            </div>
        </label>
        <label class="weui_cell weui_check_label" for="mx">

            <div class="weui_cell_bd weui_cell_primary">
                <p>混合</p>
            </div>
            <div class="weui_cell_ft">
                <input name="food" class="weui_check" id="mx" type="radio" value="mx">
                <span class="weui_icon_checked"></span>
            </div>
        </label>
    </div>
    <div class="weui_cell appetite_cell">
        <div class="weui_cell_hd"><label class="weui_label">饭量</label></div>
        <div class="weui_cell_bd weui_cell_primary">
            <input class="weui_input" type="number" id="appetite">
            <span>勺</span>
        </div>
    </div>
    <div class="weui_cell">
        <div class="weui_cell_hd"><label class="weui_label" for="">备注</label></div>
        <div class="weui_cell_bd weui_cell_primary">
            <textarea class="weui_textarea" id="comment"></textarea>
            <!-- <div class="weui_textarea_counter"><span>0</span>/200</div> -->
        </div>
    </div>
</div>
<style type="text/css">
    .appetite_cell {
        display: none;
    }

    .appetite_cell input{
        width: 3rem;
    }
</style>
<script type="text/javascript">
    var page_title = "宝宝吃饭咯",
        $form = $(".action_form"),
        ajaxSettings = {
            url: "./dining.php"
        };

    $("input:radio").on("change", function(){
        if ($("input[name=food]:radio:checked").val() !== "mm") {
            $(".appetite_cell").css("display", "flex");
        } else {
            $(".appetite_cell").css("display", "none");
            $(".appetite_cell input").val(0);
        }
    });

    function applyData (data) {
        if (!data) {
            var curr = new Date();
            $("#date", $form).val(getDate(curr));
            $("#start", $form).val(getTime(curr));
        } else {
            $("#date", $form).val(data.date);
            $("#start", $form).val(data.start);
            $("#end", $form).val(data.end);
            $("input[value=" + data.food + "]:radio").prop("checked", true);
            if (data.food !== "mm") {
                $(".appetite_cell").css("display", "flex");
            }
            $("#appetite").val(data.appetite);
            $("#comment").val(data.comment);
        }
    }
    function loadData () {
        var $end = $("#end", $form);
        !$end.val() && $end.val(getTime(new Date()));
        return {
            date: $("#date", $form).val(),
            start: $("#start", $form).val(),
            end: $("#end", $form).val(),
            food: $("input[name=food]:radio:checked").val(),
            appetite: $("#appetite").val() || 0,
            comment: $("#comment").val()
        };
    }
</script>